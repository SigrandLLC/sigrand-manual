<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 12. Configuration examples</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="SG-17R User Manual"><link rel="up" href="index.html" title="SG-17R User Manual"><link rel="prev" href="ch11s06.html" title="Supported software for management via SNMP"><link rel="next" href="ch12s02.html" title="Management of device control via the interface integrated in a bridge or bonding"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 12. Configuration examples</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch11s06.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch12s02.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 12. Configuration examples"><div class="titlepage"><div><div><h2 class="title"><a name="examples"></a>Chapter 12. Configuration examples</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ch12.html#examples.vlan">VLAN</a></span></dt><dd><dl><dt><span class="section"><a href="ch12.html#examples.vlan.scheme1">Setting of independent channels between
        Ethernet-interfaces</a></span></dt><dt><span class="section"><a href="ch12.html#examples.vlan.scheme3">Traffic distribution along Ethernet-ports according to VLAN
        ID</a></span></dt><dt><span class="section"><a href="ch12.html#examples.vlan.manage_vlan">Device management access control via VLAN</a></span></dt></dl></dd><dt><span class="section"><a href="ch12s02.html">Management of device control via the interface integrated in a
      bridge or bonding</a></span></dt><dt><span class="section"><a href="ch12s03.html">Multiplexing</a></span></dt><dt><span class="section"><a href="ch12s04.html">VoIP</a></span></dt><dd><dl><dt><span class="section"><a href="ch12s04.html#examples.voip.ex1">Common telephones function as a pair of IP-telephones</a></span></dt><dt><span class="section"><a href="ch12s04.html#examples.voip.ex3">Communication arrangement via PBX</a></span></dt><dt><span class="section"><a href="ch12s04.html#examples.voip.ex4">Arrangement of communication via PBX using two routers</a></span></dt></dl></dd></dl></div><div class="section" title="VLAN"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="examples.vlan"></a>VLAN</h2></div></div></div><div class="section" title="Setting of independent channels between Ethernet-interfaces"><div class="titlepage"><div><div><h3 class="title"><a name="examples.vlan.scheme1"></a>Setting of independent channels between
        Ethernet-interfaces</h3></div></div></div><p>The given example considers the setting of independent channels
        between the Ethernet-ports of the devices connected via SHDSL.</p><p>Let`s consider the arrangement of data communication fronm the
        port eth3 of one device to the port eth3 of another device via SHDSL
        connection. If necessary, all ports of the devices can be used (eth0,
        eth1, eth2). The pattern of interaction between the devices can be
        represented as follows:</p><div class="figure"><a name="id432692"></a><p class="title"><b>Figure 12.1. Interaction pattern</b></p><div class="figure-contents"><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/scheme1-struct.png" width="540" alt="Interaction pattern"></td></tr></table></div></div></div><br class="figure-break"><p>The devices are connected via two SHDSL channels which are
        bonded. On the bonding there created a VLAN with VLAN ID 4. The bridge
        actualize packet-mode communication between the interfaces bond0v4
        (VLAN interface) and eth3.</p><p>The adjustment begins from the adjustment od the physical
        connection between the routers (see <a class="link" href="ch06s04.html" title="SHDSL interface modules">SHDSL
        settings</a>).</p><p>Then we create a bonding of the interfaces dsl0 and dsl1 (see
        <a class="link" href="ch07s02.html#bonding" title="Settings of bonding">Bonding settings</a>). In the result we get
        the interface <span class="emphasis"><em>bond0</em></span>.</p><p>After that we need to create a VLAN on the bonding. The number
        of VLAN interfaces depends on the number of ethernet-ports between
        which we are going to establish an independent data transfer - one
        VLAN for each port. The VLAN interface setting procedure is described
        in details in the relevant <a class="link" href="ch07s02.html#vlan" title="VLAN interfaces settings">chapter</a>. I.e.
        we need to create a VLAN interface with VLAN ID 4 on the bond0
        interface. As a result, we have the interface
        <span class="emphasis"><em>bond0v4</em></span>.</p><p>The final step is bridging (see <a class="link" href="ch07s02.html#bridge" title="Bridging settings">bridge
        settings</a>). Bridge consists of the interfaces
        <span class="emphasis"><em>bond0v4</em></span> and <span class="emphasis"><em>eth3</em></span>, between
        which the traffic transfer is performed. The number of bridges depends
        on the number of ports used for data exchange - one bridge for each
        port.</p><p>Thus, if we want to arrange the exchange between the ports eth2,
        we should create one more VLAN on the interface
        <span class="emphasis"><em>bond0</em></span>, for example, with VLAN ID 3, create one
        more bridge interface and add the interfaces
        <span class="emphasis"><em>bond0v3</em></span> and <span class="emphasis"><em>eth2</em></span> to
        it.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If it is necessary to arrange a device management via the port
          which participates in data transfer (included in the bridge), its
          IP-address (at which the settings are made) should be allocated to
          the interface of the bridge. The detailed information is given in
          the relevant <a class="link" href="ch12s02.html" title="Management of device control via the interface integrated in a bridge or bonding">chapter</a>.</p></div></div><div class="section" title="Traffic distribution along Ethernet-ports according to VLAN ID"><div class="titlepage"><div><div><h3 class="title"><a name="examples.vlan.scheme3"></a>Traffic distribution along Ethernet-ports according to VLAN
        ID</h3></div></div></div><p>Suppose that we want to arrange a transfer of VLAN-traffic
        incoming to the trunk-port of one device via SHDSL-channel, and
        transfer traffic (without VLAN tag) to the relevant ethernet-port
        depending on the VLAN ID on the other device.</p><div class="figure"><a name="id432810"></a><p class="title"><b>Figure 12.2. Structure chart</b></p><div class="figure-contents"><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/scheme3-struct.png" width="540" alt="Structure chart"></td></tr></table></div></div></div><br class="figure-break"><p>The idea of the given arrangement consists in that at the
        SG-17R-2 device, one of the ports of which functions as a trunk-port,
        we create VLAN interfaces which traffic should be transmitted to the
        relevant ports of the other device.</p><p>For example, to the SG-17R-2 device (let`s say to the 4th
        ethernet-port) there connected a network, in which there are
        functioning several VLAN networks with numbers 3 and 4. We need to
        connect the VLAN ID 3 network to the network connected to the 3rd
        ethernet-port of the SG-17R-1 device. We also need to connect the VLAN
        ID 4 network to the network connected to the 4th ethernet port of the
        SG-17R-1 device. It should be noted that the networks connected to
        SG-17R-2 are simple LAN networks, and therefore the traffic
        transmitted to them should not contain "VLAN" tags.</p><p>The adjustment of the given arrangement is divided onto two
        steps: adjustment of SG-17R-1 and adjustment of SG-17R-2. It is
        understood that the physical connection between the devices (for
        example, via SHDSL)is already adjusted. In our example we use bonding
        over SHDSL channels.</p><div class="section" title="Adjustment of SG-17R-1"><div class="titlepage"><div><div><h4 class="title"><a name="id432844"></a>Adjustment of SG-17R-1</h4></div></div></div><p>In general the adjustments consists in creation of VLAN
          interfaces over the bonding interface, and bridging of the relevant
          ethernet-interface and VLAN interface. Let`s consider it in more
          detail.</p><p>Create the VLAN interface with VLAN ID 4 on the interface
          <span class="emphasis"><em>bond0</em></span> (see <a class="link" href="ch07s02.html#vlan" title="VLAN interfaces settings">VLAN
          settings</a>). The name of the new interface is
          <span class="emphasis"><em>bond0v4</em></span>. Here we also create a bridge interface
          named, for example, <span class="emphasis"><em>br0</em></span>. Integrate in it the
          interfaces between which the traffic will bw transferred:
          <span class="emphasis"><em>bond0v4</em></span> and <span class="emphasis"><em>eth3</em></span>.</p><p>If it is necessary to arrange the transmission of several VLAN
          to the ports of SG-17R-1, the gives procedure should be repeated for
          each VLAN. In the given configuration the maximum number of VLAN is
          4,cas it is limited by the number of ethernet-ports of the
          device.</p></div><div class="section" title="Adjustnment of SG-17R-2"><div class="titlepage"><div><div><h4 class="title"><a name="id432889"></a>Adjustnment of SG-17R-2</h4></div></div></div><p>Before starting we should deside which of the ethernet-ports
          of the device will function as a trunk-port, i.e. to which port the
          VLAN networks will be connected.</p><p>For the chosen trunk-port we create a VLAN interface and the
          corresponding VLAN interface on the basis of the interface of the
          bonding. Than we arrange a bridge between the existing interface of
          the trunk-port and the VLAN interface of the bonding. The thing is
          that each VLAN interface created on the trunk-port receives its own
          traffic and transmit it to its "own" bonding interface. On the
          second device (SG-17R-1) the bonding trasnfer it to the relevant
          ethernet-port. Let`s consider these actions in more detail.</p><p>The adjustment begins from the creation of VLAN interfaces
          with similar VLAN ID on the interfaces of the bonding (for example,
          <span class="emphasis"><em>bond0</em></span>) and of the ethernet-port functioning as
          a trunk-port (<span class="emphasis"><em>eth3</em></span>). Suppose the created
          interfaces have the names <span class="emphasis"><em>bond0v4</em></span> and
          <span class="emphasis"><em>eth3v4</em></span>. Here we also create the interfaces of
          the bridge, one for each pair of VLAN interfaces. For example, we
          add the interfaces <span class="emphasis"><em>bond0v4</em></span> and
          <span class="emphasis"><em>eth3v4</em></span> to the first interface.</p><p>Thus we have one or several bridge interfaces, trasmitting
          traffic between VLAN interfaces which were created on the trunk-port
          and on the bonding.</p></div></div><div class="section" title="Device management access control via VLAN"><div class="titlepage"><div><div><h3 class="title"><a name="examples.vlan.manage_vlan"></a>Device management access control via VLAN</h3></div></div></div><p>For controlling the access to the device management VLAN
        technology can be used. For this purpose, on the basis of the
        interface trough which the management is conducted we create a VLAN
        interface to which we allocate an IP-address, deleting the IP-address
        of the underlying interface.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch11s06.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch12s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Supported software for management via SNMP </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Management of device control via the interface integrated in a
      bridge or bonding</td></tr></table></div></body></html>
